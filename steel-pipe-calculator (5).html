<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>钢材管材重量计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af', // 深蓝色作为主色调，代表专业和工业感
                        secondary: '#7c3aed', // 紫色作为辅助色
                        accent: '#f97316', // 橙色作为强调色，用于突出按钮和结果
                        neutral: '#f3f4f6', // 浅灰色作为背景
                        dark: '#1f2937', // 深灰色用于文本
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.02);
            }
            .input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none;
            }
            .btn-hover {
                @apply hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300;
            }
            .animate-fadeIn {
                animation: fadeIn 0.3s ease-in-out;
            }
            .animate-pulse {
                animation: pulse 0.6s ease-in-out;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans text-dark">
    <!-- 顶部导航 -->
    <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-calculator text-primary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold text-primary">钢材管材重量计算器</h1>
            </div>
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" class="text-gray-600 hover:text-primary transition-colors duration-200">
                    <i class="fa fa-question-circle mr-1"></i>使用帮助
                </a>
                <a href="#" class="text-gray-600 hover:text-primary transition-colors duration-200">
                    <i class="fa fa-book mr-1"></i>材质参数
                </a>
            </div>
            <button class="md:hidden text-gray-600" id="mobileMenuBtn">
                <i class="fa fa-bars text-xl"></i>
            </button>
        </div>
        <!-- 移动端菜单 -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#" class="text-gray-600 hover:text-primary py-2 transition-colors duration-200">
                    <i class="fa fa-question-circle mr-1"></i>使用帮助
                </a>
                <a href="#" class="text-gray-600 hover:text-primary py-2 transition-colors duration-200">
                    <i class="fa fa-book mr-1"></i>材质参数
                </a>
            </div>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 介绍部分 -->
        <section class="mb-10 text-center max-w-3xl mx-auto">
            <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">创优重量计算工具</h2>
            <p class="text-gray-600 text-lg">快速准确计算各种钢材管材的理论重量和价格，支持多种材质和规格，为偷懒提供便利</p>
        </section>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- 计算表单 -->
            <section class="lg:col-span-2 bg-white rounded-xl p-6 md:p-8 card-shadow transform transition-all duration-300 hover:shadow-xl">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <i class="fa fa-sliders text-primary mr-2"></i>参数设置
                </h3>
                
                <form id="calculatorForm" class="space-y-6">
                    <!-- 管材类型 -->
                    <div class="space-y-2">
                        <label class="block text-gray-700 font-medium">管材类型</label>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="relative">
                                <input type="radio" id="seamless" name="pipeType" value="seamless" checked 
                                    class="peer sr-only">
                                <label for="seamless" class="flex items-center justify-center p-4 w-full border-2 border-gray-200 rounded-lg cursor-pointer 
                                    peer-checked:border-primary peer-checked:bg-primary/5 transition-all duration-200">
                                    <i class="fa fa-cube text-primary mr-2"></i>
                                    <span>圆管(无缝钢管)</span>
                                </label>
                            </div>
                            <div class="relative">
                                <input type="radio" id="square" name="pipeType" value="square" 
                                    class="peer sr-only">
                                <label for="square" class="flex items-center justify-center p-4 w-full border-2 border-gray-200 rounded-lg cursor-pointer 
                                    peer-checked:border-primary peer-checked:bg-primary/5 transition-all duration-200">
                                    <i class="fa fa-square text-primary mr-2"></i>
                                    <span>矩形管(方形钢管)</span>
                                </label>
                            </div>
                            <div class="relative">
                                <input type="radio" id="special" name="pipeType" value="special" 
                                    class="peer sr-only">
                                <label for="special" class="flex items-center justify-center p-4 w-full border-2 border-gray-200 rounded-lg cursor-pointer 
                                    peer-checked:border-primary peer-checked:bg-primary/5 transition-all duration-200">
                                    <i class="fa fa-star text-primary mr-2"></i>
                                    <span>异型钢管</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 材质选择 -->
                    <div>
                        <label for="material" class="block text-gray-700 font-medium mb-2">材质</label>
                        <div class="relative">
                            <select id="material" name="material" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus appearance-none bg-white">
                                <option value="carbon" data-density="7.85">普通碳素钢 (7.85 g/cm³)</option>
                                <option value="stainless" data-density="7.93">不锈钢 (7.93 g/cm³)</option>
                                <option value="alloy" data-density="7.80">合金结构钢 (7.80 g/cm³)</option>
                                <option value="highStrength" data-density="7.82">高强度钢 (7.82 g/cm³)</option>
                                <option value="custom">自定义密度...</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                <i class="fa fa-chevron-down"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 自定义密度（默认隐藏） -->
                    <div id="customDensityContainer" class="hidden">
                        <label for="customDensity" class="block text-gray-700 font-medium mb-2">自定义密度 (g/cm³)</label>
                        <div class="relative">
                            <input type="number" id="customDensity" name="customDensity" step="0.01" min="0.01" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：7.85">
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                <span>g/cm³</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 尺寸参数 - 根据管材类型显示不同的输入项 -->
                    <div id="dimensionInputs" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- 圆管尺寸 -->
                        <div id="seamlessDimensions">
                            <div>
                                <label for="outerDiameter" class="block text-gray-700 font-medium mb-2">直径 (mm)</label>
                                <div class="relative">
                                    <input type="number" id="outerDiameter" name="outerDiameter" step="0.1" min="0.1" required
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：100">
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                        <span>mm</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="wallThickness" class="block text-gray-700 font-medium mb-2">厚度 (mm)</label>
                                <div class="relative">
                                    <input type="number" id="wallThickness" name="wallThickness" step="0.1" min="0.1" required
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：5">
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                        <span>mm</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 矩形管尺寸 (默认隐藏) -->
                        <div id="squareDimensions" class="hidden">
                            <div>
                                <label for="squareSide" class="block text-gray-700 font-medium mb-2">单边长度 (mm)</label>
                                <div class="relative">
                                    <input type="number" id="squareSide" name="squareSide" step="0.1" min="0.1" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：100">
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                        <span>mm</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="squareThickness" class="block text-gray-700 font-medium mb-2">厚度 (mm)</label>
                                <div class="relative">
                                    <input type="number" id="squareThickness" name="squareThickness" step="0.1" min="0.1" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：5">
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                        <span>mm</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 异型钢管尺寸 (默认隐藏) -->
                        <div id="specialDimensions" class="hidden">
                            <div>
                                <label for="bandWidth" class="block text-gray-700 font-medium mb-2">带宽 (mm)</label>
                                <div class="relative">
                                    <input type="number" id="bandWidth" name="bandWidth" step="0.1" min="0.1" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：100">
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                        <span>mm</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="specialThickness" class="block text-gray-700 font-medium mb-2">厚度 (mm)</label>
                                <div class="relative">
                                    <input type="number" id="specialThickness" name="specialThickness" step="0.1" min="0.1" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：5">
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                        <span>mm</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 通用尺寸参数 -->
                        <div>
                            <label for="length" class="block text-gray-700 font-medium mb-2">长度 (m)</label>
                            <div class="relative">
                                <input type="number" id="length" name="length" step="0.1" min="0.1" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：6">
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                    <span>m</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="quantity" class="block text-gray-700 font-medium mb-2">数量 (根)</label>
                            <div class="relative">
                                <input type="number" id="quantity" name="quantity" step="1" min="1" value="1" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：10">
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                    <span>根</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 价格计算选项 -->
                    <div class="pt-2 border-t border-gray-100">
                        <div class="flex items-center mb-3">
                            <input type="checkbox" id="calculatePrice" name="calculatePrice" 
                                class="w-5 h-5 text-primary border-gray-300 rounded focus:ring-primary">
                            <label for="calculatePrice" class="ml-2 block text-gray-700 font-medium">
                                同时计算价格
                            </label>
                        </div>
                        
                        <div id="priceInputContainer" class="hidden animate-fadeIn">
                            <label for="pricePerTon" class="block text-gray-700 font-medium mb-2">每吨价格 (元/吨)</label>
                            <div class="relative">
                                <input type="number" id="pricePerTon" name="pricePerTon" step="0.01" min="0.01" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus" placeholder="例如：5000">
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-3 text-gray-500">
                                    <span>元/吨</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 计算按钮 -->
                    <div class="pt-4">
                        <button type="submit" class="w-full bg-accent hover:bg-accent/90 text-white font-bold py-4 px-6 rounded-lg 
                            flex items-center justify-center btn-hover">
                            <i class="fa fa-calculator mr-2"></i>
                            <span>计算重量</span>
                        </button>
                    </div>
                </form>
            </section>
            
            <!-- 计算结果 -->
            <section class="lg:col-span-1">
                <div class="bg-white rounded-xl p-6 md:p-8 card-shadow h-full transform transition-all duration-300 hover:shadow-xl">
                    <h3 class="text-xl font-bold mb-6 flex items-center">
                        <i class="fa fa-balance-scale text-primary mr-2"></i>计算结果
                    </h3>
                    
                    <div id="resultContainer" class="space-y-6">
                        <!-- 单根重量 -->
                        <div class="p-4 bg-neutral rounded-lg">
                            <div class="text-gray-500 text-sm mb-1">单根重量</div>
                            <div class="flex items-end">
                                <span id="singleWeight" class="text-3xl font-bold text-primary">--</span>
                                <span class="text-gray-600 ml-1 mb-1">kg</span>
                            </div>
                        </div>
                        
                        <!-- 总重量 -->
                        <div class="p-4 bg-primary/5 rounded-lg border border-primary/20">
                            <div class="text-gray-500 text-sm mb-1">总重量</div>
                            <div class="flex items-end">
                                <span id="totalWeight" class="text-3xl font-bold text-primary">--</span>
                                <span class="text-gray-600 ml-1 mb-1">kg</span>
                                <span class="text-gray-500 ml-2 mb-1 text-sm">(<span id="totalWeightTon">--</span> 吨)</span>
                            </div>
                        </div>
                        
                        <!-- 价格结果 (默认隐藏) -->
                        <div id="priceResult" class="p-4 bg-accent/5 rounded-lg border border-accent/20 hidden">
                            <div class="text-gray-500 text-sm mb-1">总价</div>
                            <div class="flex items-end">
                                <span id="totalPrice" class="text-3xl font-bold text-accent">--</span>
                                <span class="text-gray-600 ml-1 mb-1">元</span>
                            </div>
                        </div>
                        
                        <!-- 计算详情 -->
                        <div>
                            <h4 class="font-medium text-gray-700 mb-3 flex items-center">
                                <i class="fa fa-info-circle text-gray-500 mr-1"></i>计算详情
                            </h4>
                            <div id="calculationDetails" class="text-sm text-gray-600 space-y-2 bg-gray-50 p-4 rounded-lg">
                                <p>请输入参数并点击计算按钮</p>
                            </div>
                        </div>
                        
                        <!-- 复制结果按钮 -->
                        <button id="copyResultBtn" class="w-full bg-white border border-gray-300 text-gray-700 font-medium py-3 px-4 rounded-lg 
                            flex items-center justify-center btn-hover opacity-50 cursor-not-allowed" disabled>
                            <i class="fa fa-copy mr-2"></i>
                            <span>复制结果</span>
                        </button>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- 计算公式说明 -->
        <section class="mt-12 bg-white rounded-xl p-6 md:p-8 card-shadow">
            <h3 class="text-xl font-bold mb-6 flex items-center">
                <i class="fa fa-formula text-primary mr-2"></i>计算公式
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h4 class="font-medium text-lg mb-3">各类钢材重量计算公式</h4>
                    
                     <!-- 通用公式 -->
                    <div class="mb-6 bg-primary/5 p-4 rounded-lg border border-primary/20">
                        <p class="font-medium mb-2 text-primary">通用公式</p>
                        <div class="bg-neutral p-4 rounded-lg mb-2 text-center">
                            <p>重量（公斤/kg） = 截面积（平方米/m²） × 长度（米/m） × 密度（7850 kg/m³）</p>
                        </div>
                    </div>
                                             9
                    <div class="mb-6">
                        <p class="font-medium mb-2">1. 圆管(无缝钢管)</p>
                        <div class="bg-neutral p-4 rounded-lg mb-2 text-center">
                            <p>截面积 = π × [(外径/2)² - ((外径-2×厚度)/2)²]</p>
                        </div>
                        <p class="text-sm text-gray-600">
                            单位说明：外径和厚度单位为毫米(mm)，计算时需转换为米(m)，<br>
                            密度：普通钢材为7850 kg/m³，不锈钢为7930 kg/m³等
                        </p>
                    </div>
                    
                    <div class="mb-6">
                        <p class="font-medium mb-2">2. 矩形管(方形钢管)</p>
                        <div class="bg-neutral p-4 rounded-lg mb-2 text-center">
                            <p>截面积 = (边长×边长) - ((边长-2×厚度)×(边长-2×厚度))</p>
                        </div>
                        <p class="text-sm text-gray-600">
                            单位说明：边长和厚度单位为毫米(mm)，计算时需转换为米(m)，<br>
                            密度：普通钢材为7850 kg/m³，不锈钢为7930 kg/m³等
                        </p>
                    </div>
                    
                    <div class="mb-6">
                        <p class="font-medium mb-2">3. 异型钢管</p>
                        <div class="bg-neutral p-4 rounded-lg mb-2 text-center">
                            <p>截面积 ≈ π × [(带宽/π/2)² - ((带宽/π-2×厚度)/2)²]</p>
                        </div>
                        <p class="text-sm text-gray-600">
                            单位说明：带宽和厚度单位为毫米(mm)，计算时需转换为米(m)，<br>
                            密度：普通钢材为7850 kg/m³，不锈钢为7930 kg/m³等
                        </p>
                    </div>
                    
                    <div>
                        <p class="font-medium mb-2">4. 价格计算</p>
                        <div class="bg-neutral p-4 rounded-lg mb-2 text-center">
                            <p>总价(元) = 总重量(吨) × 每吨价格(元/吨)</p>
                        </div>
                        <p class="text-sm text-gray-600">总重量(吨) = 总重量(kg) ÷ 1000</p>
                    </div>
                </div>
                <div>
                    <h4 class="font-medium text-lg mb-3">常用钢材密度参考</h4>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>
                                <tr>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">材质</th>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">密度 (g/cm³)</th>
                                    <th class="px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">密度 (kg/m³)</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-4 py-3 text-sm text-gray-900">普通碳素钢</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7.85</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7850</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 text-sm text-gray-900">不锈钢</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7.93</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7930</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 text-sm text-gray-900">合金结构钢</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7.80</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7800</td>
                                </tr>
                                <tr>
                                    <td class="px-4 py-3 text-sm text-gray-900">高强度钢</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7.82</td>
                                    <td class="px-4 py-3 text-sm text-gray-500">7820</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h4 class="text-lg font-bold mb-4 flex items-center">
                        <i class="fa fa-calculator mr-2"></i>钢材管材重量计算器
                    </h4>
                    <p class="text-gray-400 text-sm">专业的钢材重量计算工具，为工程设计和采购提供便利。</p>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">快速链接</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors duration-200">偷懒指南</a></li>
                        <li><a href="#" class="hover:text-white transition-colors duration-200">没有问题</a></li>
                        <li><a href="#" class="hover:text-white transition-colors duration-200">材质参数表</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-bold mb-4">注意事项</h4>
                    <p class="text-gray-400 text-sm">本计算器提供的结果为理论重量，仅供参考。实际重量可能因材质、制造工艺等因素有所差异。</p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500 text-sm">
                <p>© 2025 钢材管材重量计算器 - 保留所有权利</p>
            </div>
        </div>
    </footer>

    <!-- 复制成功提示 -->
    <div id="copyToast" class="fixed bottom-6 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
        <i class="fa fa-check-circle mr-2"></i>
        <span>结果已复制到剪贴板</span>
    </div>

    <script>
        // 移动端菜单切换
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });
        
        // 自定义密度显示/隐藏逻辑
        const materialSelect = document.getElementById('material');
        const customDensityContainer = document.getElementById('customDensityContainer');
        const customDensityInput = document.getElementById('customDensity');
        
        materialSelect.addEventListener('change', function() {
            if (this.value === 'custom') {
                customDensityContainer.classList.remove('hidden');
                customDensityInput.required = true;
                customDensityContainer.classList.add('animate-fadeIn');
            } else {
                customDensityContainer.classList.add('hidden');
                customDensityInput.required = false;
            }
        });
        
        // 价格计算选项显示/隐藏逻辑
        const calculatePriceCheckbox = document.getElementById('calculatePrice');
        const priceInputContainer = document.getElementById('priceInputContainer');
        const pricePerTonInput = document.getElementById('pricePerTon');
        
        calculatePriceCheckbox.addEventListener('change', function() {
            if (this.checked) {
                priceInputContainer.classList.remove('hidden');
                pricePerTonInput.required = true;
            } else {
                priceInputContainer.classList.add('hidden');
                pricePerTonInput.required = false;
            }
        });
        
        // 管材类型切换逻辑
        const pipeTypeRadios = document.querySelectorAll('input[name="pipeType"]');
        const seamlessDimensions = document.getElementById('seamlessDimensions');
        const squareDimensions = document.getElementById('squareDimensions');
        const specialDimensions = document.getElementById('specialDimensions');
        
        // 为每个管材类型单选按钮添加事件监听器
        pipeTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                // 隐藏所有尺寸输入
                seamlessDimensions.classList.add('hidden');
                squareDimensions.classList.add('hidden');
                specialDimensions.classList.add('hidden');
                
                // 根据选中的管材类型显示相应的尺寸输入
                if (this.value === 'seamless') {
                    seamlessDimensions.classList.remove('hidden');
                    seamlessDimensions.classList.add('animate-fadeIn');
                    // 设置圆管输入为必填
                    document.getElementById('outerDiameter').required = true;
                    document.getElementById('wallThickness').required = true;
                    // 其他输入为非必填
                    document.getElementById('squareSide').required = false;
                    document.getElementById('squareThickness').required = false;
                    document.getElementById('bandWidth').required = false;
                    document.getElementById('specialThickness').required = false;
                } else if (this.value === 'square') {
                    squareDimensions.classList.remove('hidden');
                    squareDimensions.classList.add('animate-fadeIn');
                    // 设置矩形管输入为必填
                    document.getElementById('squareSide').required = true;
                    document.getElementById('squareThickness').required = true;
                    // 其他输入为非必填
                    document.getElementById('outerDiameter').required = false;
                    document.getElementById('wallThickness').required = false;
                    document.getElementById('bandWidth').required = false;
                    document.getElementById('specialThickness').required = false;
                } else if (this.value === 'special') {
                    specialDimensions.classList.remove('hidden');
                    specialDimensions.classList.add('animate-fadeIn');
                    // 设置异型钢管输入为必填
                    document.getElementById('bandWidth').required = true;
                    document.getElementById('specialThickness').required = true;
                    // 其他输入为非必填
                    document.getElementById('outerDiameter').required = false;
                    document.getElementById('wallThickness').required = false;
                    document.getElementById('squareSide').required = false;
                    document.getElementById('squareThickness').required = false;
                }
            });
        });
        
        // 表单提交处理
        const calculatorForm = document.getElementById('calculatorForm');
        const singleWeightEl = document.getElementById('singleWeight');
        const totalWeightEl = document.getElementById('totalWeight');
        const totalWeightTonEl = document.getElementById('totalWeightTon');
        const calculationDetailsEl = document.getElementById('calculationDetails');
        const copyResultBtn = document.getElementById('copyResultBtn');
        const priceResultEl = document.getElementById('priceResult');
        const totalPriceEl = document.getElementById('totalPrice');
        
        calculatorForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 获取表单数据
            const pipeType = document.querySelector('input[name="pipeType"]:checked').value;
            const length = parseFloat(document.getElementById('length').value);
            const quantity = parseInt(document.getElementById('quantity').value);
            const calculatePrice = document.getElementById('calculatePrice').checked;
            let pricePerTon = 0;
            
            if (calculatePrice) {
                pricePerTon = parseFloat(document.getElementById('pricePerTon').value);
            }
            
            // 获取密度
            let density;
            if (materialSelect.value === 'custom') {
                density = parseFloat(customDensityInput.value);
            } else {
                density = parseFloat(materialSelect.options[materialSelect.selectedIndex].dataset.density);
            }
            
            let singleWeight = 0;
            let detailsHTML = '';
            let pipeTypeText = '';
            
            // 根据管材类型计算重量，注意单位换算
            if (pipeType === 'seamless') {
                pipeTypeText = '圆管(无缝钢管)';
                const diameter = parseFloat(document.getElementById('outerDiameter').value);
                const thickness = parseFloat(document.getElementById('wallThickness').value);
                
                // 验证尺寸是否有效
                if (diameter <= thickness) {
                    alert('直径必须大于厚度。请检查输入的参数。');
                    return;
                }
                
                // 按照通用公式：重量（kg） = 截面积（m²） × 长度（m） × 密度（kg/m³）
                // 圆管截面积 = π × [(外径/2)² - ((外径-2×厚度)/2)²]，单位需转换为平方米
                const radiusOuter = diameter / 2 / 1000; // 转换为米
                const radiusInner = (diameter - 2 * thickness) / 2 / 1000; // 转换为米
                const crossSectionArea = Math.PI * (radiusOuter * radiusOuter - radiusInner * radiusInner); // 平方米
                const densityKgPerM3 = density * 1000; // 将g/cm³转换为kg/m³
                singleWeight = crossSectionArea * length * densityKgPerM3;
                
                detailsHTML = `
                    <p><strong>管材类型：</strong>圆管(无缝钢管)</p>
                    <p><strong>直径：</strong>${diameter} mm</p>
                    <p><strong>厚度：</strong>${thickness} mm</p>
                    <p><strong>长度：</strong>${length} m</p>
                    <p><strong>数量：</strong>${quantity} 根</p>
                    <p><strong>密度：</strong>${density} g/cm³</p>
                    <p class="mt-2 pt-2 border-t border-gray-200 text-gray-700">
                        计算公式：截面积(m²) × 长度(m) × 密度(kg/m³)
                    </p>
                    <p class="text-gray-600 text-sm">
                        截面积计算：π × [(${diameter}/2)² - ((${diameter}-2×${thickness})/2)²] mm² 转换为 m²
                    </p>
                `;
            } else if (pipeType === 'square') {
                pipeTypeText = '矩形管(方形钢管)';
                const sideLength = parseFloat(document.getElementById('squareSide').value);
                const thickness = parseFloat(document.getElementById('squareThickness').value);
                
                // 验证尺寸是否有效
                if (sideLength <= thickness) {
                    alert('单边长度必须大于厚度。请检查输入的参数。');
                    return;
                }
                
                // 按照通用公式：重量（kg） = 截面积（m²） × 长度（m） × 密度（kg/m³）
                // 矩形管截面积 = (边长×边长) - ((边长-2×厚度)×(边长-2×厚度))，单位需转换为平方米
                const outerArea = (sideLength / 1000) * (sideLength / 1000); // 转换为平方米
                const innerArea = ((sideLength - 2 * thickness) / 1000) * ((sideLength - 2 * thickness) / 1000); // 转换为平方米
                const crossSectionArea = outerArea - innerArea; // 平方米
                const densityKgPerM3 = density * 1000; // 将g/cm³转换为kg/m³
                singleWeight = crossSectionArea * length * densityKgPerM3;
                
                detailsHTML = `
                    <p><strong>管材类型：</strong>矩形管(方形钢管)</p>
                    <p><strong>单边长度：</strong>${sideLength} mm</p>
                    <p><strong>厚度：</strong>${thickness} mm</p>
                    <p><strong>长度：</strong>${length} m</p>
                    <p><strong>数量：</strong>${quantity} 根</p>
                    <p><strong>密度：</strong>${density} g/cm³</p>
                    <p class="mt-2 pt-2 border-t border-gray-200 text-gray-700">
                        计算公式：截面积(m²) × 长度(m) × 密度(kg/m³)
                    </p>
                    <p class="text-gray-600 text-sm">
                        截面积计算：(${sideLength}×${sideLength}) - ((${sideLength}-2×${thickness})×(${sideLength}-2×${thickness})) mm² 转换为 m²
                    </p>
                `;
            } else if (pipeType === 'special') {
                pipeTypeText = '异型钢管';
                const bandWidth = parseFloat(document.getElementById('bandWidth').value);
                const thickness = parseFloat(document.getElementById('specialThickness').value);
                
                // 验证尺寸是否有效
                if (bandWidth / 3.14 <= thickness) {
                    alert('带宽计算后的值必须大于厚度。请检查输入的参数。');
                    return;
                }
                
                // 按照通用公式：重量（kg） = 截面积（m²） × 长度（m） × 密度（kg/m³）
                // 异型钢管截面积近似计算：(带宽/π - 厚度) × 厚度 × π，单位需转换为平方米
                const diameterApprox = bandWidth / 3.14; // 近似直径
                const radiusOuter = diameterApprox / 2 / 1000; // 转换为米
                const radiusInner = (diameterApprox - 2 * thickness) / 2 / 1000; // 转换为米
                const crossSectionArea = 3.14 * (radiusOuter * radiusOuter - radiusInner * radiusInner); // 平方米
                const densityKgPerM3 = density * 1000; // 将g/cm³转换为kg/m³
                singleWeight = crossSectionArea * length * densityKgPerM3;
                
                detailsHTML = `
                    <p><strong>管材类型：</strong>异型钢管</p>
                    <p><strong>带宽：</strong>${bandWidth} mm</p>
                    <p><strong>厚度：</strong>${thickness} mm</p>
                    <p><strong>长度：</strong>${length} m</p>
                    <p><strong>数量：</strong>${quantity} 根</p>
                    <p><strong>密度：</strong>${density} g/cm³</p>
                    <p class="mt-2 pt-2 border-t border-gray-200 text-gray-700">
                        计算公式：截面积(m²) × 长度(m) × 密度(kg/m³)
                    </p>
                    <p class="text-gray-600 text-sm">
                        截面积计算：π × [(${bandWidth}/π/2)² - ((${bandWidth}/π-2×${thickness})/2)²] mm² 转换为 m²
                    </p>
                `;
            }
            
            // 计算总重量
            const totalWeight = singleWeight * quantity;
            const totalWeightTon = totalWeight / 1000; // 转换为吨
            
            // 显示结果（保留两位小数）
            singleWeightEl.textContent = singleWeight.toFixed(2);
            totalWeightEl.textContent = totalWeight.toFixed(2);
            totalWeightTonEl.textContent = totalWeightTon.toFixed(3);
            
            // 价格计算和显示
            if (calculatePrice) {
                const totalPrice = totalWeightTon * pricePerTon;
                totalPriceEl.textContent = totalPrice.toFixed(2);
                priceResultEl.classList.remove('hidden');
                
                // 添加价格信息到详情
                detailsHTML += `
                    <p class="mt-2 pt-2 border-t border-gray-200">
                        <strong>每吨价格：</strong>${pricePerTon} 元/吨
                    </p>
                    <p class="text-gray-700">
                        价格计算公式：${totalWeightTon.toFixed(3)} 吨 × ${pricePerTon} 元/吨
                    </p>
                `;
            } else {
                priceResultEl.classList.add('hidden');
            }
            
            // 显示计算详情
            calculationDetailsEl.innerHTML = detailsHTML;
            
            // 启用复制按钮
            copyResultBtn.disabled = false;
            copyResultBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            copyResultBtn.classList.add('hover:bg-gray-100');
            
            // 添加结果显示动画
            [singleWeightEl, totalWeightEl, totalPriceEl].forEach(el => {
                if (!el.classList.contains('hidden')) {
                    el.classList.add('animate-pulse');
                    setTimeout(() => el.classList.remove('animate-pulse'), 1000);
                }
            });
        });
        
        // 复制结果功能
        const copyToast = document.getElementById('copyToast');
        
        copyResultBtn.addEventListener('click', function() {
            const pipeType = document.querySelector('input[name="pipeType"]:checked').value;
            const calculatePrice = document.getElementById('calculatePrice').checked;
            let typeSpecificDetails = '';
            let priceDetails = '';
            
            if (pipeType === 'seamless') {
                typeSpecificDetails = `
直径：${document.getElementById('outerDiameter').value} mm
厚度：${document.getElementById('wallThickness').value} mm`;
            } else if (pipeType === 'square') {
                typeSpecificDetails = `
单边长度：${document.getElementById('squareSide').value} mm
厚度：${document.getElementById('squareThickness').value} mm`;
            } else if (pipeType === 'special') {
                typeSpecificDetails = `
带宽：${document.getElementById('bandWidth').value} mm
厚度：${document.getElementById('specialThickness').value} mm`;
            }
            
            if (calculatePrice) {
                priceDetails = `
每吨价格：${document.getElementById('pricePerTon').value} 元/吨
总价：${totalPriceEl.textContent} 元`;
            }
            
            const pipeTypeText = pipeType === 'seamless' ? '圆管(无缝钢管)' : 
                                pipeType === 'square' ? '矩形管(方形钢管)' : '异型钢管';
            
            const resultText = `钢材管材计算结果：
类型：${pipeTypeText}${typeSpecificDetails}
长度：${document.getElementById('length').value} m
数量：${document.getElementById('quantity').value} 根
单根重量：${singleWeightEl.textContent} kg
总重量：${totalWeightEl.textContent} kg (${totalWeightTonEl.textContent} 吨)${priceDetails}`;
            
            // 复制到剪贴板
            navigator.clipboard.writeText(resultText).then(() => {
                // 显示提示
                copyToast.classList.remove('translate-y-20', 'opacity-0');
                copyToast.classList.add('translate-y-0', 'opacity-100');
                
                // 3秒后隐藏提示
                setTimeout(() => {
                    copyToast.classList.remove('translate-y-0', 'opacity-100');
                    copyToast.classList.add('translate-y-20', 'opacity-0');
                }, 3000);
            });
        });
        
        // 页面滚动时导航栏样式变化
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 10) {
                header.classList.add('py-2', 'shadow');
                header.classList.remove('py-4');
            } else {
                header.classList.add('py-4');
                header.classList.remove('py-2', 'shadow');
            }
        });
    </script>
</body>
</html>